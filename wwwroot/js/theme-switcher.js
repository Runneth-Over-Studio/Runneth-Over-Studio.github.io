const sun_svg = '<svg viewBox="0 0 512 512"><path fill="currentColor" d="M 256 0 Q 271 1 272 16 L 272 96 L 272 96 Q 271 111 256 112 Q 241 111 240 96 L 240 16 L 240 16 Q 241 1 256 0 L 256 0 Z M 0 256 Q 1 241 16 240 L 96 240 L 96 240 Q 111 241 112 256 Q 111 271 96 272 L 16 272 L 16 272 Q 1 271 0 256 L 0 256 Z M 400 256 Q 401 241 416 240 L 496 240 L 496 240 Q 511 241 512 256 Q 511 271 496 272 L 416 272 L 416 272 Q 401 271 400 256 L 400 256 Z M 256 400 Q 271 401 272 416 L 272 496 L 272 496 Q 271 511 256 512 Q 241 511 240 496 L 240 416 L 240 416 Q 241 401 256 400 L 256 400 Z M 75 75 Q 86 66 98 75 L 154 132 L 154 132 Q 163 143 154 154 Q 143 164 132 154 L 75 98 L 75 98 Q 66 86 75 75 L 75 75 Z M 75 437 Q 66 426 75 414 L 132 358 L 132 358 Q 143 349 154 358 Q 164 369 154 380 L 98 437 L 98 437 Q 86 446 75 437 L 75 437 Z M 358 154 Q 349 143 358 132 L 414 75 L 414 75 Q 426 66 437 75 Q 446 86 437 98 L 380 154 L 380 154 Q 369 163 358 154 L 358 154 Z M 358 358 Q 369 349 380 358 L 437 414 L 437 414 Q 446 426 437 437 Q 426 446 414 437 L 358 380 L 358 380 Q 349 369 358 358 L 358 358 Z M 336 256 Q 335 211 296 187 Q 256 165 216 187 Q 177 211 176 256 Q 177 301 216 325 Q 256 347 296 325 Q 335 301 336 256 L 336 256 Z M 144 256 Q 144 226 159 200 L 159 200 L 159 200 Q 174 174 200 159 Q 226 144 256 144 Q 286 144 312 159 Q 338 174 353 200 Q 368 226 368 256 Q 368 286 353 312 Q 338 338 312 353 Q 286 368 256 368 Q 226 368 200 353 Q 174 338 159 312 Q 144 286 144 256 L 144 256 Z" /></svg>';
const moon_svg = '<svg viewBox="0 0 512 512"><g fill="currentColor"><path d="M 253.14285714285714 40 Q 218.85714285714286 72 200.57142857142858 116.57142857142857 L 200.57142857142858 116.57142857142857 L 200.57142857142858 116.57142857142857 Q 181.14285714285714 160 181.14285714285714 210.28571428571428 Q 183.42857142857142 306.2857142857143 244 371.42857142857144 Q 304.57142857142856 437.7142857142857 398.2857142857143 446.85714285714283 Q 349.14285714285717 474.2857142857143 290.85714285714283 475.42857142857144 Q 197.14285714285714 473.14285714285717 135.42857142857142 411.42857142857144 Q 73.71428571428571 349.7142857142857 71.42857142857143 256 Q 72.57142857142857 172.57142857142858 124 114.28571428571429 Q 174.28571428571428 54.857142857142854 253.14285714285714 40 L 253.14285714285714 40 Z M 328.57142857142856 14.857142857142858 Q 325.14285714285717 2.2857142857142856 311.42857142857144 1.1428571428571428 Q 301.14285714285717 0 289.7142857142857 0 Q 218.85714285714286 1.1428571428571428 161.71428571428572 35.42857142857143 Q 103.42857142857143 68.57142857142857 69.14285714285714 126.85714285714286 Q 36 184 34.857142857142854 256 Q 36 328 70.28571428571429 385.14285714285717 Q 103.42857142857143 443.42857142857144 161.71428571428572 476.57142857142856 Q 218.85714285714286 510.85714285714283 290.85714285714283 512 Q 397.14285714285717 509.7142857142857 468 440 Q 477.14285714285717 429.7142857142857 471.42857142857144 418.2857142857143 Q 465.7142857142857 406.85714285714283 452 408 Q 436 411.42857142857144 417.7142857142857 411.42857142857144 Q 333.14285714285717 409.14285714285717 276 352 Q 220 296 217.71428571428572 210.28571428571428 Q 217.71428571428572 153.14285714285714 245.14285714285714 107.42857142857143 Q 273.7142857142857 61.714285714285715 319.42857142857144 35.42857142857143 Q 330.85714285714283 28.571428571428573 328.57142857142856 14.857142857142858 L 328.57142857142856 14.857142857142858 Z" /></g></svg>';
const themeSwitcher = document.getElementById('theme-switcher');
const default_theme ='dark';

// Load saved theme from local storage.
let savedTheme = localStorage.getItem('theme');
if (!savedTheme || savedTheme === 'undefined') { savedTheme = default_theme; }
document.documentElement.setAttribute('data-theme', savedTheme);
themeSwitcher.value = savedTheme;
themeSwitcher.innerHTML = getThemeSwitcherSVG(savedTheme);
updateImages(savedTheme);

// Change theme and save to local storage.
themeSwitcher.addEventListener('click', (event) => {
    event.preventDefault();
    let currentTheme = localStorage.getItem('theme');
    if (!currentTheme || currentTheme === 'undefined') { currentTheme = default_theme; }
    const nextTheme = getNextTheme(currentTheme);
    document.documentElement.setAttribute('data-theme', nextTheme);
    localStorage.setItem('theme', nextTheme);
    themeSwitcher.innerHTML = getThemeSwitcherSVG(nextTheme);
    themeSwitcher.blur();
    updateImages(nextTheme);
});

// Cycle to next theme option.
function getNextTheme(currentTheme) {
    if (currentTheme === 'dark') return 'light';
    else return 'dark';
}

// Return appropriate SVG for the given theme.
function getThemeSwitcherSVG(theme) {
    if (theme === 'dark') return moon_svg;
    else return sun_svg;
}

// Set theme specific images.
function updateImages(theme) {
    const logo = document.getElementById("site-logo");
    logo.src = (theme === 'dark')
        ? "wwwroot/images/logo-vector-horizontal-dark.svg"
        : "wwwroot/images/logo-vector-horizontal-light.svg";
}
